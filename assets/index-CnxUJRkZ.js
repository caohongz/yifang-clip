import{d as R,r as m,o as F,c as i,a as s,b as l,w as o,F as H,e as K,u as L,n as S,f as p,g as r,h as u,i as x,v as z,p as A,t as b,j as D,k as I,E as P,l as q}from"./index-DjWO6jQE.js";import{d as w,_ as G}from"./_plugin-vue_export-helper-CUx95MTQ.js";const J={class:"project-list"},O={class:"header"},Q={key:0,class:"empty-state"},W={class:"empty-content"},X={key:1,class:"projects-grid text-base"},Z=["onClick"],h=["src"],ee={key:1,class:"placeholder"},te={class:"info"},le={class:"flex justify-between items-center"},oe=R({__name:"index",setup(se){L();const _=m([]),c=m(!1),d=m({name:""}),g=m(),f=m(!1),v=m(null);F(async()=>{y()});const y=async()=>{_.value=await w.projects.toArray()},C=()=>{c.value=!0,S(()=>{g.value.focus()})},k=async()=>{d.value.name&&(await w.projects.add({name:d.value.name,createTime:new Date().getTime(),tracks:[],thumbnail:""}),c.value=!1,d.value.name="",y())},T=a=>{const n=`${window.location.origin}/#/clip/${a.id}`;window.open(n,"_blank")},U=a=>{v.value=a,f.value=!0},$=async()=>{var a;if((a=v.value)!=null&&a.id)try{await w.projects.delete(v.value.id),P.success("项目删除成功"),f.value=!1,v.value=null,await y()}catch(e){P.error("删除项目失败"),console.error("删除项目失败:",e)}},M=a=>q(a).format("YYYY-MM-DD HH:mm:ss");return(a,e)=>{const n=p("el-button"),V=p("el-icon"),N=p("el-input"),Y=p("el-form-item"),B=p("el-form"),j=p("el-dialog");return r(),i("div",J,[s("div",O,[e[6]||(e[6]=s("h1",null,"我的剪辑项目",-1)),l(n,{type:"primary",onClick:C},{default:o(()=>e[5]||(e[5]=[u("新建项目")])),_:1})]),_.value.length?(r(),i("div",X,[(r(!0),i(H,null,K(_.value,t=>(r(),i("div",{key:t.id,class:"project-card"},[s("div",{class:"thumbnail",onClick:E=>T(t)},[t.thumbnail?(r(),i("img",{key:0,src:t.thumbnail,alt:"项目缩略图"},null,8,h)):(r(),i("div",ee,"无缩略图"))],8,Z),s("div",te,[s("div",le,[s("h3",null,b(t.name),1),l(n,{type:"danger",size:"small",onClick:D(E=>U(t),["stop"])},{default:o(()=>e[10]||(e[10]=[u(" 删除 ")])),_:2},1032,["onClick"])]),s("p",null,"更新时间："+b(M(t.updateTime)),1)])]))),128))])):(r(),i("div",Q,[s("div",W,[l(V,{class:"empty-icon"},{default:o(()=>[l(x(z))]),_:1}),e[8]||(e[8]=s("p",{class:"empty-text"},"还没有创建任何项目",-1)),e[9]||(e[9]=s("p",{class:"empty-subtext"},'点击"新建项目"开始创作吧！',-1)),l(n,{type:"primary",class:"mt-4",onClick:C},{default:o(()=>[l(V,{class:"mr-2"},{default:o(()=>[l(x(A))]),_:1}),e[7]||(e[7]=u(" 新建项目 "))]),_:1})])])),l(j,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),title:"新建项目"},{footer:o(()=>[l(n,{onClick:e[1]||(e[1]=t=>c.value=!1)},{default:o(()=>e[11]||(e[11]=[u("取消")])),_:1}),l(n,{type:"primary",onClick:k},{default:o(()=>e[12]||(e[12]=[u("确定")])),_:1})]),default:o(()=>[l(B,{model:d.value,onSubmit:D(k,["prevent"])},{default:o(()=>[l(Y,{label:"项目名称"},{default:o(()=>[l(N,{modelValue:d.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value.name=t),ref_key:"inputRef",ref:g,onKeyup:I(k,["enter"])},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(j,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),title:"删除确认",width:"30%"},{footer:o(()=>[l(n,{onClick:e[3]||(e[3]=t=>f.value=!1)},{default:o(()=>e[13]||(e[13]=[u("取消")])),_:1}),l(n,{type:"danger",onClick:$},{default:o(()=>e[14]||(e[14]=[u("确定删除")])),_:1})]),default:o(()=>{var t;return[s("span",null,'确定要删除项目"'+b((t=v.value)==null?void 0:t.name)+'"吗？此操作不可恢复。',1)]}),_:1},8,["modelValue"])])}}}),ie=G(oe,[["__scopeId","data-v-fbb6dab1"]]);export{ie as default};
